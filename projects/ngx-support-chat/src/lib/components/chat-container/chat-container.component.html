<div class="chat-container">
  <!-- Header Section -->
  <ngx-chat-header>
    <ng-content select="[chatHeader]" />
  </ngx-chat-header>

  <!-- Message Area Section -->
  <main class="chat-main" role="log" aria-live="polite" aria-relevant="additions" aria-label="Chat conversation">
    @if (messages().length === 0) {
      <div class="chat-empty-state">
        <ng-content select="[chatEmptyState]" />
      </div>
    } @else {
      <ngx-chat-message-area
        [messages]="messages()"
        [currentUserId]="currentUserId()"
        (messageRetry)="messageRetry.emit($any($event))"
        (imagePreview)="imagePreview.emit($event)"
        (fileDownload)="fileDownload.emit($event)"
      />
    }

    <!-- Typing Indicator (below messages) -->
    @if (typingIndicator(); as indicator) {
      <ngx-chat-typing-indicator [typingIndicator]="indicator" [showText]="true" />
    }

    <!-- Quick Replies (below messages/typing indicator) -->
    @if (quickReplies(); as replies) {
      <ngx-chat-quick-replies [quickReplies]="replies" (quickReplySubmit)="onQuickReplySubmit($event)" />
    }
  </main>

  <!-- Footer Section -->
  <ngx-chat-footer
    [pendingAttachments]="pendingAttachments()"
    [(inputValue)]="inputValue"
    [disabled]="disabled()"
    [hasContent]="hasContent()"
    (messageSend)="onFooterMessageSend()"
    (attachmentSelect)="attachmentSelect.emit($event)"
    (attachmentRemove)="attachmentRemove.emit($event)"
  >
    <ng-content select="[chatFooterPrefix]" ngProjectAs="[chatFooterPrefix]" />
    <ng-content select="[chatFooterActions]" ngProjectAs="[chatFooterActions]" />
  </ngx-chat-footer>
</div>
