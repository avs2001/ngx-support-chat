<div class="quick-replies" [ngClass]="{ 'quick-replies--submitted': isSubmitted() }">
  <!-- Prompt text -->
  @if (prompt()) {
    <p class="quick-replies__prompt">{{ prompt() }}</p>
  }

  <!-- Confirmation type: single button -->
  @if (type() === 'confirmation') {
    <div class="quick-replies__options quick-replies__options--confirmation">
      @if (firstOption(); as option) {
        <button
          type="button"
          class="quick-reply-option quick-reply-option--confirmation"
          [ngClass]="getOptionClasses(option)"
          [disabled]="isSubmitted() || option.disabled"
          (click)="onConfirm()"
        >
          {{ option.label }}
        </button>
      }
    </div>
  }

  <!-- Single-choice type: radio-style buttons -->
  @if (type() === 'single-choice') {
    <div
      class="quick-replies__options quick-replies__options--single-choice"
      role="radiogroup"
      [attr.aria-label]="prompt() || 'Quick reply options'"
    >
      @for (option of options(); track option.value) {
        <button
          type="button"
          role="radio"
          [attr.aria-checked]="isSubmitted() ? wasSelected(option) : false"
          [ngClass]="getOptionClasses(option)"
          [disabled]="isSubmitted() || option.disabled"
          (click)="onSingleSelect(option)"
        >
          {{ option.label }}
        </button>
      }
    </div>
  }

  <!-- Multiple-choice type: checkbox-style buttons with submit -->
  @if (type() === 'multiple-choice') {
    <div
      class="quick-replies__options quick-replies__options--multiple-choice"
      role="group"
      [attr.aria-label]="prompt() || 'Quick reply options'"
    >
      @for (option of options(); track option.value) {
        <label [ngClass]="getOptionClasses(option)" class="quick-reply-checkbox">
          <input
            type="checkbox"
            [checked]="isSubmitted() ? wasSelected(option) : isSelected(option)"
            [disabled]="isSubmitted() || option.disabled"
            (change)="onMultiToggle(option)"
          />
          <span class="quick-reply-checkbox__label">{{ option.label }}</span>
        </label>
      }

      @if (!isSubmitted()) {
        <button type="button" class="quick-reply-submit" [disabled]="!hasSelections()" (click)="onMultiSubmit()">
          Submit
        </button>
      }
    </div>
  }
</div>
